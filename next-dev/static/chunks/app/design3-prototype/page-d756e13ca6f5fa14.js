(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{7688:(e,s,a)=>{"use strict";a.d(s,{default:()=>r});var i=a(5155),n=a(2115);a(8311);let r=()=>{var e;let[s,a]=(0,n.useState)(1),[r,l]=(0,n.useState)([]),[c,t]=(0,n.useState)([]),[d,o]=(0,n.useState)(!1),[m,h]=(0,n.useState)(null),[u,x]=(0,n.useState)(null),[p,j]=(0,n.useState)({selectedIndices:[],marketCap:{min:"",max:""},peRatio:{min:"",max:""},dividendYield:{min:"",max:""},debtToEquity:{min:"",max:""},currentRatio:{min:"",max:""},roe:{min:"",max:""},roa:{min:"",max:""},profitMargin:{min:"",max:""},revenueGrowth:{min:"",max:""},earningsGrowth:{min:"",max:""}}),v=[{id:1,title:"S\xe9lection du March\xe9",description:"Choisissez les indices \xe0 analyser"},{id:2,title:"Configuration des Crit\xe8res",description:"D\xe9finissez vos crit\xe8res de screening"},{id:3,title:"Aper\xe7u de l'Analyse",description:"V\xe9rifiez vos param\xe8tres avant l'ex\xe9cution"},{id:4,title:"R\xe9sultats",description:"Consultez les r\xe9sultats de votre screening"}];(0,n.useEffect)(()=>{N()},[]);let N=async()=>{try{o(!0);let e=await fetch("http://localhost:8000/indices");if(!e.ok)throw Error("Erreur lors du chargement des indices");let s=await e.json();t(s)}catch(e){h(e.message)}finally{o(!1)}},g=(e,s,a)=>{j(i=>({...i,[e]:{...i[e],[s]:a}}))},y=async()=>{try{o(!0),h(null);let e=await fetch("http://localhost:8000/screen",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!e.ok)throw Error("Erreur lors du screening");let i=await e.json();x(i),l(e=>[...e,s]),a(4)}catch(e){h(e.message)}finally{o(!1)}},b=()=>{s<4&&(l(e=>[...e,s]),a(s+1))},C=()=>{s>1&&a(s-1)},f=()=>{switch(s){case 1:return p.selectedIndices.length>0;case 2:return Object.values(p).some(e=>!("object"!=typeof e||null===e||Array.isArray(e))&&(""!==e.min||""!==e.max));case 3:return!0;default:return!1}};return(0,i.jsxs)("div",{className:"design3-container",children:[(0,i.jsxs)("header",{className:"design3-header",children:[(0,i.jsx)("h1",{children:"Stock Screener - Analyse Progressive"}),(0,i.jsx)("p",{children:"Suivez les \xe9tapes pour configurer et ex\xe9cuter votre analyse"})]}),(0,i.jsx)("div",{className:"progress-container",children:(0,i.jsx)("div",{className:"progress-bar",children:v.map((e,n)=>(0,i.jsxs)("div",{className:"progress-step-container",children:[(0,i.jsxs)("div",{className:"progress-step ".concat(s===e.id?"active":r.includes(e.id)?"completed":"pending"),onClick:()=>(e=>{(e<=s||r.includes(e))&&a(e)})(e.id),children:[(0,i.jsx)("div",{className:"step-number",children:r.includes(e.id)?"✓":e.id}),(0,i.jsxs)("div",{className:"step-info",children:[(0,i.jsx)("div",{className:"step-title",children:e.title}),(0,i.jsx)("div",{className:"step-description",children:e.description})]})]}),n<v.length-1&&(0,i.jsx)("div",{className:"progress-connector ".concat(r.includes(e.id)?"completed":"")})]},e.id))})}),(0,i.jsxs)("main",{className:"design3-main",children:[m&&(0,i.jsxs)("div",{className:"alert alert-error",children:[(0,i.jsx)("span",{className:"alert-icon",children:"⚠️"}),(0,i.jsx)("span",{children:m})]}),1===s&&(0,i.jsxs)("div",{className:"step-panel",children:[(0,i.jsx)("h2",{children:"\xc9tape 1: S\xe9lection du March\xe9"}),(0,i.jsx)("p",{children:"Choisissez les indices boursiers que vous souhaitez analyser :"}),(0,i.jsx)("div",{className:"market-selection",children:d?(0,i.jsx)("div",{className:"loading-spinner",children:"Chargement des indices..."}):(0,i.jsxs)("div",{className:"indices-grid",children:[Array.isArray(c)&&c.map(e=>(0,i.jsxs)("label",{className:"index-card",children:[(0,i.jsx)("input",{type:"checkbox",checked:p.selectedIndices.includes(e),onChange:s=>{var a;a=s.target.checked?[...p.selectedIndices,e]:p.selectedIndices.filter(s=>s!==e),j(e=>({...e,selectedIndices:a}))}}),(0,i.jsx)("span",{className:"index-name",children:e})]},e)),!Array.isArray(c)&&!d&&(0,i.jsx)("div",{className:"no-indices",children:"Aucun indice disponible"})]})}),(0,i.jsx)("div",{className:"step-actions",children:(0,i.jsx)("button",{className:"btn btn-primary",onClick:b,disabled:!f(),children:"Continuer →"})})]}),2===s&&(0,i.jsxs)("div",{className:"step-panel",children:[(0,i.jsx)("h2",{children:"\xc9tape 2: Configuration des Crit\xe8res"}),(0,i.jsx)("p",{children:"D\xe9finissez vos crit\xe8res de screening financier :"}),(0,i.jsxs)("div",{className:"criteria-grid",children:[(0,i.jsxs)("div",{className:"criteria-group",children:[(0,i.jsx)("h3",{children:"Valorisation"}),(0,i.jsxs)("div",{className:"range-input",children:[(0,i.jsx)("label",{children:"Market Cap (M$)"}),(0,i.jsxs)("div",{className:"range-controls",children:[(0,i.jsx)("input",{type:"number",placeholder:"Min",value:p.marketCap.min,onChange:e=>g("marketCap","min",e.target.value)}),(0,i.jsx)("span",{children:"-"}),(0,i.jsx)("input",{type:"number",placeholder:"Max",value:p.marketCap.max,onChange:e=>g("marketCap","max",e.target.value)})]})]}),(0,i.jsxs)("div",{className:"range-input",children:[(0,i.jsx)("label",{children:"P/E Ratio"}),(0,i.jsxs)("div",{className:"range-controls",children:[(0,i.jsx)("input",{type:"number",placeholder:"Min",value:p.peRatio.min,onChange:e=>g("peRatio","min",e.target.value)}),(0,i.jsx)("span",{children:"-"}),(0,i.jsx)("input",{type:"number",placeholder:"Max",value:p.peRatio.max,onChange:e=>g("peRatio","max",e.target.value)})]})]})]}),(0,i.jsxs)("div",{className:"criteria-group",children:[(0,i.jsx)("h3",{children:"Dividendes & Ratios"}),(0,i.jsxs)("div",{className:"range-input",children:[(0,i.jsx)("label",{children:"Dividend Yield (%)"}),(0,i.jsxs)("div",{className:"range-controls",children:[(0,i.jsx)("input",{type:"number",placeholder:"Min",value:p.dividendYield.min,onChange:e=>g("dividendYield","min",e.target.value)}),(0,i.jsx)("span",{children:"-"}),(0,i.jsx)("input",{type:"number",placeholder:"Max",value:p.dividendYield.max,onChange:e=>g("dividendYield","max",e.target.value)})]})]}),(0,i.jsxs)("div",{className:"range-input",children:[(0,i.jsx)("label",{children:"Current Ratio"}),(0,i.jsxs)("div",{className:"range-controls",children:[(0,i.jsx)("input",{type:"number",placeholder:"Min",value:p.currentRatio.min,onChange:e=>g("currentRatio","min",e.target.value)}),(0,i.jsx)("span",{children:"-"}),(0,i.jsx)("input",{type:"number",placeholder:"Max",value:p.currentRatio.max,onChange:e=>g("currentRatio","max",e.target.value)})]})]})]}),(0,i.jsxs)("div",{className:"criteria-group",children:[(0,i.jsx)("h3",{children:"Rentabilit\xe9"}),(0,i.jsxs)("div",{className:"range-input",children:[(0,i.jsx)("label",{children:"ROE (%)"}),(0,i.jsxs)("div",{className:"range-controls",children:[(0,i.jsx)("input",{type:"number",placeholder:"Min",value:p.roe.min,onChange:e=>g("roe","min",e.target.value)}),(0,i.jsx)("span",{children:"-"}),(0,i.jsx)("input",{type:"number",placeholder:"Max",value:p.roe.max,onChange:e=>g("roe","max",e.target.value)})]})]}),(0,i.jsxs)("div",{className:"range-input",children:[(0,i.jsx)("label",{children:"Profit Margin (%)"}),(0,i.jsxs)("div",{className:"range-controls",children:[(0,i.jsx)("input",{type:"number",placeholder:"Min",value:p.profitMargin.min,onChange:e=>g("profitMargin","min",e.target.value)}),(0,i.jsx)("span",{children:"-"}),(0,i.jsx)("input",{type:"number",placeholder:"Max",value:p.profitMargin.max,onChange:e=>g("profitMargin","max",e.target.value)})]})]})]})]}),(0,i.jsxs)("div",{className:"step-actions",children:[(0,i.jsx)("button",{className:"btn btn-secondary",onClick:C,children:"← Retour"}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:b,disabled:!f(),children:"Continuer →"})]})]}),3===s&&(0,i.jsxs)("div",{className:"step-panel",children:[(0,i.jsx)("h2",{children:"\xc9tape 3: Aper\xe7u de l'Analyse"}),(0,i.jsx)("p",{children:"V\xe9rifiez vos param\xe8tres avant de lancer l'analyse :"}),(0,i.jsxs)("div",{className:"preview-summary",children:[(0,i.jsxs)("div",{className:"summary-section",children:[(0,i.jsx)("h3",{children:"Indices s\xe9lectionn\xe9s"}),(0,i.jsx)("div",{className:"selected-indices",children:p.selectedIndices.length>0?p.selectedIndices.map(e=>(0,i.jsx)("span",{className:"index-tag",children:e},e)):(0,i.jsx)("span",{className:"no-selection",children:"Aucun indice s\xe9lectionn\xe9"})})]}),(0,i.jsxs)("div",{className:"summary-section",children:[(0,i.jsx)("h3",{children:"Crit\xe8res configur\xe9s"}),(0,i.jsx)("div",{className:"criteria-summary",children:Object.entries(p).map(e=>{let[s,a]=e;return"selectedIndices"!==s&&a&&"object"==typeof a&&(""!==a.min||""!==a.max)?(0,i.jsxs)("div",{className:"criteria-item",children:[(0,i.jsx)("span",{className:"criteria-name",children:s}),(0,i.jsxs)("span",{className:"criteria-range",children:[a.min&&"Min: ".concat(a.min),a.min&&a.max&&" | ",a.max&&"Max: ".concat(a.max)]})]},s):null})})]})]}),(0,i.jsxs)("div",{className:"step-actions",children:[(0,i.jsx)("button",{className:"btn btn-secondary",onClick:C,children:"← Retour"}),(0,i.jsx)("button",{className:"btn btn-primary btn-analyze",onClick:y,disabled:d||0===p.selectedIndices.length,children:d?"Analyse en cours...":"Lancer l'Analyse →"})]})]}),4===s&&(0,i.jsxs)("div",{className:"step-panel",children:[(0,i.jsx)("h2",{children:"\xc9tape 4: R\xe9sultats de l'Analyse"}),d&&(0,i.jsx)("div",{className:"loading-container",children:(0,i.jsx)("div",{className:"loading-spinner",children:"Analyse en cours..."})}),u&&(0,i.jsxs)("div",{className:"results-dashboard",children:[(0,i.jsxs)("div",{className:"results-summary",children:[(0,i.jsxs)("div",{className:"summary-card",children:[(0,i.jsx)("h3",{children:"Actions trouv\xe9es"}),(0,i.jsx)("div",{className:"summary-value",children:u.total_results})]}),(0,i.jsxs)("div",{className:"summary-card",children:[(0,i.jsx)("h3",{children:"Indices analys\xe9s"}),(0,i.jsx)("div",{className:"summary-value",children:p.selectedIndices.length})]}),(0,i.jsxs)("div",{className:"summary-card",children:[(0,i.jsx)("h3",{children:"Crit\xe8res appliqu\xe9s"}),(0,i.jsx)("div",{className:"summary-value",children:Object.values(p).filter(e=>"object"==typeof e&&null!==e&&!Array.isArray(e)&&(""!==e.min||""!==e.max)).length})]})]}),(0,i.jsxs)("div",{className:"results-actions",children:[(0,i.jsx)("button",{className:"btn btn-secondary",onClick:()=>{if(!u||!u.results)return;let e=new Blob([["Symbole,Nom,Prix,Market Cap,P/E Ratio,Dividend Yield",...u.results.map(e=>[e.symbol,e.name,e.price,e.market_cap,e.pe_ratio,e.dividend_yield].join(","))].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="screening_results.csv",a.click(),window.URL.revokeObjectURL(s)},children:"\uD83D\uDCCA T\xe9l\xe9charger CSV"}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:()=>a(1),children:"\uD83D\uDD04 Nouvelle Analyse"})]}),(0,i.jsx)("div",{className:"results-table-container",children:(0,i.jsxs)("table",{className:"results-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Symbole"}),(0,i.jsx)("th",{children:"Nom"}),(0,i.jsx)("th",{children:"Prix"}),(0,i.jsx)("th",{children:"Market Cap"}),(0,i.jsx)("th",{children:"P/E Ratio"}),(0,i.jsx)("th",{children:"Dividend Yield"})]})}),(0,i.jsx)("tbody",{children:null==(e=u.results)?void 0:e.map((e,s)=>{var a,n;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"symbol-cell",children:e.symbol}),(0,i.jsx)("td",{children:e.name}),(0,i.jsxs)("td",{children:["$",(null==(a=e.price)?void 0:a.toFixed(2))||"N/A"]}),(0,i.jsx)("td",{children:e.market_cap?"$".concat((e.market_cap/1e6).toFixed(0),"M"):"N/A"}),(0,i.jsx)("td",{children:(null==(n=e.pe_ratio)?void 0:n.toFixed(2))||"N/A"}),(0,i.jsx)("td",{children:e.dividend_yield?"".concat(e.dividend_yield.toFixed(2),"%"):"N/A"})]},s)})})]})})]}),!u&&!d&&(0,i.jsxs)("div",{className:"no-results",children:[(0,i.jsx)("p",{children:"Aucun r\xe9sultat disponible. Veuillez relancer l'analyse."}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:()=>a(1),children:"Recommencer l'Analyse"})]})]})]})]})}},8311:()=>{},8818:(e,s,a)=>{Promise.resolve().then(a.bind(a,7688))}},e=>{e.O(0,[416,441,255,358],()=>e(e.s=8818)),_N_E=e.O()}]);